version: 2
build:
  os: ubuntu-22.04
  tools:
    python: "latest"
    rust: "latest"
  commands:
    - pip install maturin pdoc
    - maturin build --features python --release
    - pip install --find-links=target/wheels/ automesh
    - mkdir -p $READTHEDOCS_OUTPUT/html/
    - pdoc automesh --html --output-dir temporary/
    - mv temporary/automesh/index.html $READTHEDOCS_OUTPUT/html/
    - rm -r temporary/
